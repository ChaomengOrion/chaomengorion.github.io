const TOC_CLASSNAME_PREFIX="toc-level-",SCAN_FROM_ELEMENT_ID="main-content",ARTICLE_MAX_WIDTH=900;class Topic{constructor(e,t){this.element=e,this.name=e.textContent,this._className="toc-level-"+t;const n=e.querySelector("span[id]");this.link=n?"#"+n.id:"#"+e.textContent,this._level=t}isAboveWindow(){return this.element.offsetTop<document.documentElement.scrollTop+window.innerHeight/3}get className(){return this._className}get level(){return this._level}set level(e){this._className="toc-level-"+e,this._level=e}}const TopicItem=Vue.defineComponent({name:"TopicItem",props:{item:Topic,visible:Boolean,index:Number},emits:{linkClick:Number},setup(e,{emit:t}){const n=()=>{t("linkClick",e.index)};return()=>Vue.h("div",{class:[e.visible?"toc-item-active":"toc-item-inactive","toc-item",e.item.className]},[Vue.h("a",{onClick:n,href:e.item.link},e.item.name)])}}),TocComponent=Vue.defineComponent({components:{TopicItem:TopicItem},name:"toc-component",setup(){const e=Vue.ref([]),t=Vue.ref(1),n=Vue.ref("0");let o;function i(){if(o)return;let n;for(n=e.value.length-1;n>=0;n--){if(e.value[n].isAboveWindow()){t.value=n;break}}-1===n&&(t.value=0)}function l(){s()}Vue.onMounted(()=>{const n=document.getElementById("main-content");if(!n)return;const o=[],c=n.childNodes;let m=1e3;if(c.forEach(e=>{let t;2!==e.nodeName.length||"H"!==e.nodeName[0]||Number.isNaN(t=Number.parseInt(e.nodeName[1]))||(o.push(new Topic(e,t)),m=Math.min(m,t))}),e.value=o,m>1){const e=m-1;o.forEach(t=>{t.level-=e})}window.addEventListener("scroll",i),window.addEventListener("resize",l),i(),s(),setTimeout(()=>{s(),t.value=0},1200)}),Vue.onUnmounted(()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",l)});const s=()=>{const{clientWidth:e}=document.documentElement;n.value=(e-900)/2+"px"},c=e=>{o=!0,t.value=e,setTimeout(()=>{o=!1},50)};return()=>Vue.h("div",{id:"toc",style:{top:"50%",transform:"translateY(-50%)",maxHeight:"80%",width:n.value}},[Vue.h("div",{class:"toc-scroll"},[e.value.length>0?Vue.h("div",{class:"toc-header",style:{backgroundColor:"#f6f8fa"}},"Contents"):null,...e.value.map((e,n)=>Vue.h(TopicItem,{key:e.name,item:e,visible:t.value===n,onLinkClick:c,index:n}))])])}});mixins.toc={components:{"toc-component":TocComponent}};